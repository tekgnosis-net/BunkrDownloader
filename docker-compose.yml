services:
  bunkr:
    image: ghcr.io/tekgnosis-net/bunkrdownloader:${IMAGE_TAG:-latest}
    build:
      context: .
      dockerfile: Dockerfile
      args:
        APP_VERSION: ${IMAGE_TAG:-latest}
        APP_UID: ${UID:-1000}
        APP_GID: ${GID:-1000}
    container_name: bunkr
    pull_policy: always
    user: "${UID:-1000}:${GID:-1000}"
    ports:
      - "${API_PORT:-8000}:8000"
    environment:
      API_HOST: ${API_HOST:-0.0.0.0}
      API_PORT: ${API_PORT:-8000}
      SESSION_LOG_PATH: ${SESSION_LOG_PATH:-/app/logs/session.log}
      STATUS_CHECK_ON_FAILURE: ${STATUS_CHECK_ON_FAILURE:-true}
      STATUS_CACHE_TTL_SECONDS: ${STATUS_CACHE_TTL_SECONDS:-60}
      MAINTENANCE_RETRY_STRATEGY: ${MAINTENANCE_RETRY_STRATEGY:-backoff}
    volumes:
      - ${DOWNLOADS_DIR:-./Downloads}:/app/Downloads
      - ${LOGS_DIR:-./logs}:/app/logs
    restart: unless-stopped
